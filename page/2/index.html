<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="LvMin-Blog">
<meta property="og:url" content="blog.shenzihao.top/page/2/index.html">
<meta property="og:site_name" content="LvMin-Blog">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="LvMin-Blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="blog.shenzihao.top/page/2/">





  <title>LvMin-Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">LvMin-Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">网络安全</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="blog.shenzihao.top/2019/10/25/网络基础七/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="吕敏">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/1.jpg">
    </span>

     <span title="Words count in article">
      字
     </span>

        ...
     <span title="Reading time">
      分钟
     </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LvMin-Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/25/网络基础七/" itemprop="url">网络基础七</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-25T14:55:09+08:00">
                2019-10-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time </span>
                
                <span title="Reading time">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-7单臂路由"><a href="#1-7单臂路由" class="headerlink" title="1.7单臂路由"></a>1.7单臂路由</h1><p>1.以太通道和vlan划分的排查命令：</p>
<p>  SW3#show vlan brief            //检查vlan和接口是否对应（access链路）</p>
<p>  SW3#show int   trunk         //检查trunk链路</p>
<p>  SW3#show etherchannel summary   //检查以太通道（SU表示正常；如果是其他状态，就进入接口先shutdown ，再no shutdown）</p>
<p>  （1）以太通道的协商方式：</p>
<p>  使用的两个协议：</p>
<p>  Link Aggregation Control Protocol ， LACP ：IEEE 定义的标准协议。</p>
<p>  Port Aggregation Protocol：是Cisco的专有协议。</p>
<p>  SW2(config)#int range f0/6 - 8 </p>
<p>  SW2(config-if-range)#channel-group 1 mode ?</p>
<p>  active     Enable LACP unconditionally            //主动模式</p>
<p>  passive    Enable LACP only if a LACP device is detected     //被动模式</p>
<p>  auto       Enable PAgP only if a PAgP device is detected        //被动模式，自动协商</p>
<p>  desirable  Enable PAgP unconditionally        //期望，主动模式</p>
<p>  on         Enable Etherchannel only    //表示手工指定为on；对端必须是on才能协商成功。</p>
<p>1.单臂路由：实现不同vlan的通信。</p>
<p>  (1)基本配置：</p>
<p>  int   f0/0 </p>
<p>  no    shut   </p>
<p>  int   f0/0.10    //创建一个子接口</p>
<p>  encapsulation   dot1q   10     //设置数据帧的封装格式为dot1q，对应的vlanID是10</p>
<p>  ip   add    192.168.10.254   255.255.255.0 </p>
<p>  (2)工作原理：</p>
<p>  源目IP地址不变，二层mac地址被重写，实现标签置换。</p>
<p>2.实验步骤：先实现内网通信；再实现外网通信。</p>
<p>  （1）第一步：先配置PC和网关</p>
<p>  （2）第二步：配置二层交换机————划分vlan，配置trunk</p>
<p>​        Switch(config-if)#int f0/2</p>
<p>​        Switch(config-if)#sw mode acc</p>
<p>​        Switch(config-if)#sw acc vlan 20</p>
<p>​        Switch(config-if)#int f0/3</p>
<p>​        Switch(config-if)#switchport access vlan 30</p>
<p>​        Switch(config-if)#int f0/4</p>
<p>​        Switch(config-if)#switchport mode trunk </p>
<p>   （3）第三步：在出口路由器的内接口，配置单臂路由，实现内网不同vlan的通信</p>
<p>​         interface FastEthernet0/0</p>
<p>​         no shutdown </p>
<p>​        interface FastEthernet0/0.10</p>
<p>​         encapsulation dot1Q 10</p>
<p>​         ip address 192.168.10.254 255.255.255.0</p>
<p>   （4）第四步：内网通了以后，实现外网通信。</p>
<p>​        检查IP的命令：</p>
<p>​        R2(config-if)#do show ip int bri </p>
<p>​        R2(config-if)#do show ip route    //检查路由表</p>
<p>1.VTP（Vlan Trunking  Protocol）：vlan中继协议，用来管理vlan的创建、删除和修改。</p>
<p>  VTP的前提条件：交换机之间必须是Trunk链路；必须都在相同的域名中。</p>
<p>2.VTP的三种模式：</p>
<p>​    （1）服务器模式（Server）</p>
<p>​    可以创建、删除和修改VLAN</p>
<p>​    学习、转发相同域名的VTP通告</p>
<p>​    （2）客户机模式（Client）</p>
<p>​    学习、转发相同域名的VTP通告</p>
<p>​    不可以创建、删除和修改VLAN</p>
<p>​    （3）透明模式（Transparent）</p>
<p>​    可以创建、删除和修改VLAN，但只在本地有效</p>
<p>​    转发但不学习VTP通告</p>
<p>3.VTP的基本配置；</p>
<p>   vtp   domain   test        //配置vtp的域名</p>
<p>   vtp   mode     server/client/transparent        //服务端、客户端、透明模式</p>
<p>   vtp   version  2            //指定VTP的版本号</p>
<p>   vtp   password  123456    //加入域中的密码</p>
<p>   show   vtp  status      //检查vtp的状态</p>
<p>   说明：</p>
<p>   （1）为了防止其他设备先同步vlan信息，尽量先配VTP，再起trunk。</p>
<p>   （2）服务端和客户端的vlan信息存放在flash:/vlan.dat中；</p>
<p>​        即使清掉域信息，flash里还是有vlan信息，所以只能删掉数据库文件，重启才能真正清除信息。</p>
<p>​        Server#delete flash:/vlan.dat    //清空配置时，要先删除vlan.dat</p>
<p>​        Server#erase  startup-config     //清除配置</p>
<p>​        Server#reload                    //重启  </p>
<p>  （3）透明模式的VTP配置会出现在show  run里</p>
<p>​        </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="blog.shenzihao.top/2019/10/24/网络基础六/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="吕敏">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/1.jpg">
    </span>

     <span title="Words count in article">
      字
     </span>

        ...
     <span title="Reading time">
      分钟
     </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LvMin-Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/24/网络基础六/" itemprop="url">网络基础六</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-24T19:22:48+08:00">
                2019-10-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time </span>
                
                <span title="Reading time">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-6IpsecVPN"><a href="#1-6IpsecVPN" class="headerlink" title="1.6IpsecVPN"></a>1.6IpsecVPN</h1><p>1.VPN：Virtaul Private  Network虚拟私有网络，实现内网之间的通信。</p>
<p>  私网之间的通信方式：</p>
<p>​        专线，安全性高，但是成本比较高;</p>
<p>​        租用链路；</p>
<p>​        VPN        </p>
<p>2.网络安全的方面：</p>
<p>  （1）数据被窃听：保障数据的机密性，</p>
<p>  （2）被篡改；保障数据的完整性，</p>
<p>  （3）防重放：给每个数据一个编号Sequence，</p>
<p>  （4）源认证；保障数据的发送和接收方都是合法的，</p>
<p>3.常见的算法</p>
<p>  （1）对称加密：加密和解密用的是同一把钥匙（算法）</p>
<p>​          常见的对称加密算法：DES、3DES、AES</p>
<p>​      特点：速度快，但是存在被窃听的危险。</p>
<p>  （2）非对称加密：加密和解密用的不是一把钥匙，是一个秘钥对————公钥和私钥。</p>
<p>​           基本传输方式：用公钥进行加密，用私钥来进行解密。</p>
<p>​       非对称加密算法：DH算法和RSA（证书）</p>
<p>​       特点：速度慢，但是更安全。</p>
<p>  （3）哈希算法：校验数据的完整性，防止被篡改。</p>
<p>​          常见算法：md5/sha/Hmac</p>
<p>4.IpsecVPN：</p>
<p>  协商分为2个阶段：</p>
<p>  第一阶段用来协商秘钥的安全性；使用的是isakmp协议叫做互联网秘钥交互协议。</p>
<p>  第二阶段是用来保证数据的安全性。</p>
<p>  （1）第一步：先实现公网通信。</p>
<p>​       ip  route  0.0.0.0   0.0.0.0  12.1.1.2</p>
<p>  （2）第二步：定义第一阶段，密码和密码的加密方式等</p>
<p>​       R1(config)#crypto isakmp policy 10        //定义第一阶段的策略，编号为10</p>
<p>​       R1(config-isakmp)#authentication pre-share   //认证方式为预共享密码</p>
<p>​       R1(config-isakmp)#encryption 3des           //加密方式为3des</p>
<p>​       R1(config-isakmp)#hash    sha              //保证数据完整性，用的是sha</p>
<p>​       R1(config-isakmp)#group 2            //使用非对称加密算法对秘钥进行二次加密</p>
<p>​       R1(config)#crypto isakmp key test.123 address 45.1.1.2   //定义密码为test.123，指定对端</p>
<p>​           的公网地址45.1.1.2</p>
<p>  （3）第三步：定义第二阶段，保证数据的安全性</p>
<p>​       R1(config)#crypto ipsec transform-set SET esp-3des esp-sha-hmac   //定义转换集，保证数</p>
<p>​          据安全性，3des是用来加密的；sha是用来保证完整性的</p>
<p>​       R1(cfg-crypto-trans)#mode tunnel         //设置传输模式为隧道模式，默认配置</p>
<p>  （4）第四步：定义感兴趣流量（对哪些流量进行加密，只有定义的感兴趣流量之间才能通信）       </p>
<p>​       R1(config)#access-list 100 permit ip host 192.168.1.1 host 192.168.2.1   //允许192.168.1.1</p>
<p>​           和192.168.2.1之间通信</p>
<p>  （5）第五步：把第2/3/4步绑到一起</p>
<p>​           R1(config)#crypto map VPN 10 ipsec-isakmp   //定义一个策略图，名称叫VPN，编号是10</p>
<p>​       R1(config-crypto-map)#match address 100         //匹配感兴趣流量</p>
<p>​       R1(config-crypto-map)#set peer 45.1.1.2            //设置对端公网地址45.1.1.2</p>
<p>​       R1(config-crypto-map)#set transform-set SET     //匹配转换集</p>
<p>​       R1(config-crypto-map)#exit</p>
<p>  （6）第六步：应用到接口</p>
<p>​        R1(config)#int f0/1</p>
<p>​        R1(config-if)#crypto map VPN </p>
<p>  （7）检查命令：</p>
<p>​        R1#show crypto engine connections active  //查看加密和解密的数据包    </p>
<p>  （8）后续需求：</p>
<p>​           实现PC2和PC4之间的通信，修改ACL</p>
<p>​       R1(config)#access-list 100 permit ip host 192.168.1.2 host 192.168.2.2   同时也要在对端添</p>
<p>​          加 </p>
<p>  （9）实现NAT</p>
<p>​       R1(config)#access-list 110 deny ip 192.168.1.0 0.0.0.255 192.168.2.0 0.0.0.255        //在</p>
<p>​           NAT流量里拒绝VPN流量，允许其他  </p>
<p>​       R1(config)#access-list 110 permit ip 192.168.1.0 0.0.0.255 any</p>
<p>​       R1(config)#ip nat inside source list 110 interface f0/1 overload    //做NAT转换</p>
<p>  （10）检查命令：  </p>
<p>​           R1#show crypto isakmp policy        //查看一阶段的策略</p>
<p>​       R1#show crypto isakmp sa         //SA叫做安全关联，是两个路由器协商完成后的策略存储方</p>
<p>​           式</p>
<p>​        IPv4 Crypto ISAKMP SA</p>
<p>​        dst             src             state          conn-id status       //Status状态是Active表示可用</p>
<p>​        45.1.1.2        12.1.1.1        QM_IDLE           1001 ACTIVE</p>
<p>​      R5#show  crypto isakmp key     //一阶段，查看秘钥</p>
<p>​        Keyring      Hostname/Address                            Preshared Key</p>
<p>​        default      12.1.1.1                                    test.123</p>
<p>​      R5#show crypto ipsec transform-set       //检查第二阶段的转换集（保证数据的可靠性）</p>
<p>​        Transform set default: { esp-aes esp-sha-hmac  }    //default，默认策略</p>
<p>​            will negotiate = { Transport,  }, </p>
<p>​        Transform set shanghai: { esp-3des esp-sha-hmac  }   //自定义的shanghai策略</p>
<p>​         will negotiate = { Tunnel,  }, </p>
<p>​      R5#show crypto ipsec sa    //查看第二阶段的sa（协商成功后的策略）</p>
<p>​      R5#show crypto map    //查看map的内容</p>
<pre><code>Crypto Map IPv4 &quot;SH&quot; 10 ipsec-isakmp              //map名字叫SH，编号为10 </code></pre><p>​                Peer = 12.1.1.1                //对端的公网Ip</p>
<p>​                Extended IP access list 100            //感兴趣流量</p>
<p>​                access-list 100 permit ip host 192.168.2.1 host 192.168.1.1</p>
<p>​                access-list 100 permit ip host 192.168.2.2 host 192.168.1.2</p>
<p>​                Current peer: 12.1.1.1</p>
<p>​                Security association lifetime: 4608000 kilobytes/3600 seconds</p>
<p>​                Responder-Only (Y/N): N</p>
<p>​                PFS (Y/N): N</p>
<p>​               Transform sets={             //第二阶段的转换集</p>
<p>​               shanghai:  { esp-3des esp-sha-hmac  } , </p>
<p>​                 }</p>
<p>​      </p>
<p>​                Interfaces using crypto map SH:   //map应用的接口</p>
<p>​                FastEthernet0/0            </p>
<p>authentication  pre-share 认证方式是预共享秘钥的方式</p>
<p>encryption   加密 </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="blog.shenzihao.top/2019/10/24/网络基础五/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="吕敏">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/1.jpg">
    </span>

     <span title="Words count in article">
      字
     </span>

        ...
     <span title="Reading time">
      分钟
     </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LvMin-Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/24/网络基础五/" itemprop="url">网络基础五</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-24T19:22:36+08:00">
                2019-10-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time </span>
                
                <span title="Reading time">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-5路由协议：静态路由协议和动态路由协议"><a href="#1-5路由协议：静态路由协议和动态路由协议" class="headerlink" title="1.5路由协议：静态路由协议和动态路由协议"></a>1.5路由协议：静态路由协议和动态路由协议</h1><p>1.路由协议：静态路由协议和动态路由协议。</p>
<p>  （1）静态路由的基本格式：ip   route  目标网段  目标子网  下一跳</p>
<p>  （2）默认路由：一般配置在出口路由器（边缘路由器：一边连接的LAN，一边连接WAN），所有不知道的数据包都交给“互联网中的下一跳”。</p>
<p>​       ip   route   0.0.0.0   0.0.0.0   下一跳 </p>
<p>  （3）路由的冗余问题：增加多链路</p>
<p>​       负载均衡：多条链路同时进行数据传输，没有主备链路之分；如果一条down掉，另外一条还有“冗余”的功能。</p>
<p>​       配置举例：</p>
<p>​        R2(config)#ip route  192.168.2.0 255.255.255.0 13.0.0.2</p>
<p>​        R2(config)#ip route  192.168.2.0 255.255.255.0 14.0.0.2</p>
<p>​        R2(config)#do show ip route </p>
<p>​        S    192.168.2.0/24 [1/0] via 13.0.0.2</p>
<p>​                            [1/0] via 14.0.0.2</p>
<p>​       浮动路由：多条链路中只有一条是主链路，其他都是备份链路；只有主链路发生故障，备份链路才会被启用。</p>
<p>​         通过修改静态路由的优先级（管理距离），来决定哪条链路是主链路。</p>
<p>​         优先级的范围是1——255，越小越优先。默认是1.</p>
<p>​        R1(config)#ip route 0.0.0.0 0.0.0.0 192.168.3.2             //默认的优先级为1，默认是主链路</p>
<p>​        R1(config)#ip route 0.0.0.0 0.0.0.0 192.168.30.2  10        //修改路由的优先级为10，成为备份链路</p>
<p>​        R1#show ip route </p>
<p>​        S*   0.0.0.0/0 [10/0] via 192.168.30.2         //默认情况下，只有一条链路负责转发数据；</p>
<p>​        在路由表中，静态路由分为明细路由和默认路由；默认路由的优先级是最低的（其他所有的明细路由都没有匹配的时候，才会匹配默认路由）。</p>
<p>  （5）在路由器上，开启回环口模拟PC，一般用来做测试。</p>
<p>​        int   lo0</p>
<p>​        ip    add   192.168.1.1   255.255.255.0</p>
<p>​        no    sh    </p>
<p>2.路由器的工作原理：mac地址是一个二层的概念，不能跨网段。</p>
<p>源目Ip地址不变，源目mac地址被重写。</p>
<p>3.传输层：把数据包转换为数据段，为数据提供可靠或不可靠的传输；为应用程序提供端到端的服务。</p>
<p>  （1）可靠指TCP协议；不可靠指的是UDP协议。</p>
<p>  （2）端是指端口（后门）</p>
<p>​       netstat  -an    //查看本地开放的端口号和TCP的状态信息</p>
<p>​         协议   本地地址               外部地址                  状态</p>
<p>​         TCP    0.0.0.0:135            0.0.0.0:0              LISTENING     //监听状态，端口处于开放状态</p>
<p>​         TCP    192.168.120.171:50093  23.46.220.16:443       ESTABLISHED   //表示TCP三次握手已经建立完成。</p>
<p>​        LISTENING（listening）</p>
<p>​        ESTABLISHED （三次握手建立完成）</p>
<p>  （3）数据段：4层协议（TCp/UDP+端口号）+Data</p>
<p>  （4）PDU（Protocol  Data Unit）：协议数据单元，数据在每一层传输的基本单位</p>
<p>  （5）端口号的范围：0——65535，1——1024是知名端口</p>
<pre><code>TCP23————Telnet，明文传输</code></pre><p>​        TCP22————SSH，加密传输</p>
<p>​        TCP3389————远程桌面RDP服务</p>
<p>​        TCP 21/20——————FTP（21是用来建立连接的，20是用来传输数据的）</p>
<p>​        TCP80——————web服务器（http协议）；https（TCP443）</p>
<p>​        TCP445————Windows的共享</p>
<p>​        TCP25——————SMTP（简单邮件传输协议），用来发送邮件</p>
<p>​        TCP110————POP3（邮局协议版本3），用来接收邮件</p>
<p>​        TCP3306————MySQL服务</p>
<p>​        UDP53——————DNS服务（如果是客户端请求服务器来解析的话，使用的是UDP-53；如果是DNS主备服务器之间做数据同步，使用的是TCP-53）</p>
<p>​        UDP67,68————DHCP服务</p>
<p>​        UDP123————NTP（网络时间协议），是Linux中用于同步时间的。</p>
<p>4.TCP：是可靠的传输方式；所有的web页面都是基于TCP的。</p>
<p>  （1）TCP传输数据之前，先建立连接的；</p>
<p>  （2）TCP传输数据的时候，会给每个数据做一个编号（sequence 序列号），以保障数据的可靠性。</p>
<p>  （3）TCP是全双工的协议，同一时间可以上传和下载。</p>
<p>5.TCP的报文结构：</p>
<p>  （1）第一列：源目端口号</p>
<p>  （2）第二列：序列号（发送端给每个数据进行编号）</p>
<p>  （3）第三列：确认号（用来对发送端的数据做确认）=====》保障数据传输的可靠性</p>
<p>  （4）第四列：包含Flag位（标志位），用来描述这个报文的功能。</p>
<p>​       SYN=1，表示想建立连接。</p>
<p>​       ACK=1，表示报文是用来回复的。</p>
<p>​       FIN=1，表示想拆除连接。</p>
<p>6.基于TCP三次握手的攻击     </p>
<p>  （1）SYN攻击：攻击者向服务器发送大量的“伪造请求报文”，服务器会向“假的请求者”去建立邻居关系；</p>
<p>​           但实际上，这些“主机”根本没有请求服务器建立连接，导致服务器一直处于半连接状态。</p>
<p>​     如果连接的数量过多，会导致服务器资源消耗严重，甚至死机。</p>
<p>  （2）LAND攻击：攻击者伪造报文，让服务器自己和自己建立连接，导致服务器资源消耗严重。  </p>
<p>7.UDP（User Datagram Protocol ）：用户数据报协议；是一种不可靠的传输协议。</p>
<p><img src="C:%5CUsers%5CAdministrator%5CAppData%5CLocal%5CYNote%5Cdata%5C2693615777@qq.com%5C491da36ab1814f588b593e3e048fbb00%5Ctcp%E7%9A%84%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E5%92%8C%E5%9B%9B%E6%AC%A1%E6%96%AD%E5%BC%80%E8%BF%9E%E6%8E%A5.png" alt="img"></p>
<p>标志位       SYN=1，表示想建立连接。</p>
<p>​                  ACK=1，表示报文是用来回复的。</p>
<p>​                  FIN=1，表示想拆除连接</p>
<p><img src="C:%5CUsers%5CAdministrator%5CAppData%5CLocal%5CYNote%5Cdata%5C2693615777@qq.com%5C545e22a788de4b66a3142150c0b41629%5C%E6%95%B0%E6%8D%AE%E5%B0%81%E8%A3%85%E5%92%8C%E8%A7%A3%E5%B0%81%E8%A3%85%E8%BF%87%E7%A8%8B.png" alt="img"></p>
<p>​    </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="blog.shenzihao.top/2019/10/24/网络基础四/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="吕敏">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/1.jpg">
    </span>

     <span title="Words count in article">
      字
     </span>

        ...
     <span title="Reading time">
      分钟
     </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LvMin-Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/24/网络基础四/" itemprop="url">网络基础四</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-24T19:22:23+08:00">
                2019-10-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time </span>
                
                <span title="Reading time">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-4静态路由"><a href="#1-4静态路由" class="headerlink" title="1.4静态路由"></a>1.4静态路由</h1><p>1.网络层：把数据帧转换为数据包，实现基于IP地址的寻址和转发。</p>
<p>  网络层的设备：路由器</p>
<p>  网关的作用：当PC想跨网段通信的时候，所有不知道的数据包，都交给网关来处理。</p>
<p>2.路由器的作用：</p>
<p>​    （1）实现不同网段的通信；</p>
<p>​    （2）隔离广播域；</p>
<p>​          路由器的每个接口=一个网段=一个广播域</p>
<p>​    （3）为数据包寻找一条最优路径。</p>
<p>3.路由器的工作原理：源目IP地址不变，源目mac地址被重写。</p>
<p>   注意：mac地址（全球唯一性）是二层的概念，是不能跨网段的。</p>
<p>   当PC1（192.168.1.1）—-PC3（192.168.2.1）通信的时候</p>
<p>  （1）PC1先查看自己的ARP表；如果有就直接发送；如果没有，就需要进行判断。</p>
<p>​       PC1先判断目标主机和自己是否在相同的网段：</p>
<p>​            如果在同一个网段，直接发送ARP请求（广播）；</p>
<p>​            如果没有在相同的网段，就要把数据包发送给网关；</p>
<p>​        Source源：         192.168.1.1    PC1的mac地址</p>
<p>​        Destination目标：192.168.2.1    PC1网关的mac地址</p>
<p>  （2）路由器：根据目标mac地址判断是不是找我的，是找我的我就回复；不是找我的，我就丢弃。</p>
<p>​        如果是找我的，我就把数据帧还原成数据包，根据目标IP地址查看“路由表”，做转发。</p>
<p>​        路由器把到达192.168.2.1的数据包从f0/1接口发送出去。</p>
<p>​        Source：        192.168.1.1        PC3网关的mac</p>
<p>​        Destination：    192.168.2.1     PC3的mac地址</p>
<p>  （3）PC3的反应；给PC1回复数据包。</p>
<p>​        Source：           192.168.2.1    PC3的mac地址 </p>
<p>​        Destination目标：192.168.1.1    PC3的网关mac</p>
<p>  （4）路由器：目标Mac是找我的，我就“拆包”，看到里边的目标Ip；</p>
<p>​       根据目标IP进行路由表的查找，从相应接口发送出去。</p>
<p>​        Source：           192.168.2.1    PC1的网关mac</p>
<p>​        Destination目标：192.168.1.1    PC1的mac地址  </p>
<p>4.常用配置：</p>
<p>   （1）交换机的远程登录配置：</p>
<p>​    第一步：配置IP</p>
<p>​    SW1(config)#int vlan 1</p>
<p>​    SW1(config-if)#ip add 192.168.1.100 255.255.255.0</p>
<p>​    SW1(config-if)#no sh</p>
<p>​    SW1(config-if)#exit</p>
<p>​    第二步：配置telnet</p>
<p>​    SW1(config)#line vty 0 4</p>
<p>​    SW1(config-line)#pass</p>
<p>​    SW1(config-line)#password 123456</p>
<p>​    SW1(config-line)#login</p>
<p>​    SW1(config-line)#exit</p>
<p>​    第三步：配置特权模式的密码</p>
<p>​    SW1(config)#enable password 123456            </p>
<p>​    SW1(config)#no ip domain lookup    //关闭域名解析</p>
<p>​    SW2(config)#ip default-gateway 192.168.2.254    //给交换机配置网关，实现跨网段通信</p>
<p>​    常用排错命令：</p>
<p>​    R1(config)#do show ip int bri     //查看接口状态和IP</p>
<p>​    R1(config)#do show ip route     //查看路由表</p>
<p>​    R1(config)#do show run        //查看当前配置</p>
<p>​    （2）路由器的telnet配置：</p>
<p>​    第一步：给路由器接口配置IP</p>
<p>​    R1(config)#int f0/0</p>
<p>​    R1(config-if)#ip add 192.168.1.254 255.255.255.0</p>
<p>​    R1(config-if)#no sh</p>
<p>​    第二步：配置telnet</p>
<p>​    R1(config)#line vty 0 4</p>
<p>​    R1(config-line)#password 123456</p>
<p>​    R1(config-line)#login</p>
<p>​    R1(config-line)#exit</p>
<p>​    R1(config)#enable password 123456</p>
<p>​    （3）路由器接口是三层接口，可以直接配置IP；</p>
<p>​    Router(config)#int f0/1</p>
<p>​    Router(config-if)#ip add 192.168.2.254 255.255.255.0</p>
<p>​    Router(config-if)#no sh</p>
<p>​    （4）查看路由表：</p>
<p>​    Router(config-if)#do show ip route </p>
<p>​    C  表示connected，直连路由，成立的条件只要接口处于up状态，路由器就会自动把直连路由加载到路由表里。</p>
<p>​    （5）清空配置：</p>
<p>​    erase  startup-config     //清空当前配置</p>
<p>​    reload       //重启后才生效    </p>
<p>5.路由协议：路由器之间交流使用的语言。</p>
<p>  路由协议分为动态路由协议和静态路由协议（由管理员来配置）。</p>
<p>  基本格式：  ip  route   目标网段   目的子网    下一跳（直连链路的对端地址）</p>
<p>  （1）配置IP</p>
<p>​      int   f0/0</p>
<p>​      ip  address 192.168.1.254   255.255.255.0</p>
<p>​      no  sh  </p>
<p>  （2）配置路由：</p>
<p>​         查看路由表：do show ip route</p>
<p>​         配置路由：ip route 0.0.0.0 0.0.0.0 下一跳</p>
<p>  （3）检查路由表；</p>
<p>  如果不通，逐跳ping测试。</p>
<p>  tracert  192.168.7.1     //路由追踪，可以显示数据包沿途经过的设备  </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="blog.shenzihao.top/2019/10/24/网络基础三/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="吕敏">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/1.jpg">
    </span>

     <span title="Words count in article">
      字
     </span>

        ...
     <span title="Reading time">
      分钟
     </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LvMin-Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/24/网络基础三/" itemprop="url">网络基础三</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-24T19:22:15+08:00">
                2019-10-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time </span>
                
                <span title="Reading time">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-3-网络层"><a href="#1-3-网络层" class="headerlink" title="1.3 网络层"></a>1.3 网络层</h1><p>1.网络层：把数据帧转换为数据包，实现基于Ip地址的寻址和转发。</p>
<p>  数据帧：在数据外边加入二层头部（帧头和帧尾）</p>
<p>​          Dmac（6Byte）+Smac（6Byte）+Type（2Byte）+Data +FCS（4Byte，帧尾）</p>
<p>  数据包：三层IP头部+数据</p>
<p>2.IP头部：标准长度是20Byte。</p>
<p>  TTL：time to  live 生存时间，是一个三层防环机制，可以限制一个数据包在网络中传输的时间。</p>
<p>​       数据包每经过一个三层设备（路由器），他的TTL值就会减1，如果TTL=0，那么这个数据包就不能继续传输，会被丢弃。</p>
<p>​       每经过一个三层设备，叫做1跳。</p>
<p>  Protocol：用来标识上层协议，如果是UDP=17；TCP=6；ICMP=1.</p>
<p>  Source IP </p>
<p>  Destination IP </p>
<p>3.ARP：Address Resolution  Protocol地址解析协议，用来根据Ip地址解析mac。</p>
<p>  ARP报文分为2类：ARP请求报文Request；ARP响应报文Reply。</p>
<p>  ARP请求报文是以广播的形式发送；ARP响应报文是以单播的形式回复。</p>
<p>  arp  -a    //查看arp缓存信息</p>
<p>  arp  -d    //清除ARP缓存</p>
<p>4.ICMP：（Internet Control Message Protocol）互联网控制报文协议，是一个“错误侦测与回馈机制”，用来测试网络连通性。</p>
<p>  ICMP报文类型分为2种：Request请求报文和Reply回复报文。</p>
<p>  ping是一个工具/命令，利用的是ICMP协议。</p>
<p>  ping的常用参数：</p>
<p>  ping <a href="http://www.baidu.com" target="_blank" rel="noopener">www.baidu.com</a> -t             //长ping，只能按Ctrl+C停止</p>
<p>  ping -a 192.168.120.250            //-a解析主机名</p>
<p>  ping -l 1000 <a href="http://www.baidu.com" target="_blank" rel="noopener">www.baidu.com</a>        //-l指定测试数据包的大小；指定为1000个字节</p>
<p>  ping -n 6 <a href="http://www.baidu.com" target="_blank" rel="noopener">www.baidu.com</a>            //-n指定发送数据包的个数为6</p>
<p>  ping -i 5 <a href="http://www.baidu.com" target="_blank" rel="noopener">www.baidu.com</a>            //-i指定TTL值（每经过一个路由器减1，如果TTL=0就不能再继续传输）</p>
<p>  ping -l 1501 -f <a href="http://www.baidu.com" target="_blank" rel="noopener">www.baidu.com</a>        //指定发送的数据包为1501，-f表示不允许分片</p>
<p>5.ARP欺骗:交换机的工作原理是广播，对用户的身份没有验证功能。</p>
<p>  ARP欺骗：欺骗所有主机（告诉所有客户端假的网关mac地址）；中间人攻击（欺骗两个通信主机，获取他们的通信数据）。</p>
<p>  （1）实验说明：</p>
<p>​       3台虚拟机，连接到VMNET1,</p>
<p>​       windows7(客户端)——&gt;攻击者——&gt;server  2008</p>
<p>​       192.168.1.1           192.168.1.2   192.168.1.3</p>
<p>​       修改各个主机的Ip地址，并且测试是否能通信。（注意防火墙的问题）</p>
<p>  （2）在攻击者的主机上安装Cain软件</p>
<p>​            Cain——————&gt;Sniffer————&gt;开始嗅探————&gt;右键————&gt;Scan  mac  address</p>
<p>​       下边ARP——————&gt;加号——————&gt;找左边是欺骗对象，右边是欺骗的条————&gt;左                               上角低三个黄色图标，开始ARp欺骗。</p>
<p>  （3）在Server 2008 上安装FTP并配置</p>
<p>​       第一步：添加角色——————&gt;WEB服务——————&gt;FTP服务</p>
<p>​       第二步：创建目录ftproot，目录下创建两个文件夹</p>
<p>​                    down </p>
<p>​                    up  </p>
<p>​       第三步：创建对应的用户，mengzhu和tianxiao</p>
<p>​       第四步：编辑文件夹的权限，并设置mengzhu给予下载权限；tiaoxiao给予上传的权限。</p>
<p>​       第五步：在IIS里创建FTP站点即可。</p>
<p>  （4）在Windows 7 （客户端）进行访问并测试</p>
<p>​       在攻击者的主机上，查看是否有passwords（左下角第4个），如果有密码就证明获取密码成功。</p>
<p>6.Telnet：远程登录管理方式，使用的端口号是TCP-23。</p>
<p>  （1）在2008里添加“功能”—–》telnet服务端和客户端</p>
<p>  （2）使用services.msc  打开服务，开启telnet</p>
<p>  （3）在Windows7上使用命令行来登录telnet</p>
<p>​       telnet  192.168.1.3  </p>
<p>​       d:    //切换到d盘</p>
<p>​       echo  123456  &gt; telnet.txt   //在被控制主机上创建一个文件</p>
<p>​       type  telnet.txt                //查看telnet文件内容   </p>
<p>​       </p>
<p>​       </p>
<p>​       </p>
<p>​       </p>
<p>​       </p>
<p>​       </p>
<p>​       </p>
<p>​       </p>
<p>​       </p>
<p>​       </p>
<p>​       </p>
<p>​       </p>
<p>​       </p>
<p>​       </p>
<p>​       </p>
<p>​       </p>
<p>​       </p>
<p>​       </p>
<p>​       </p>
<p>​       </p>
<p>​       </p>
<p>​       </p>
<p>​       </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="blog.shenzihao.top/2019/10/24/网络基础二/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="吕敏">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/1.jpg">
    </span>

     <span title="Words count in article">
      字
     </span>

        ...
     <span title="Reading time">
      分钟
     </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LvMin-Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/24/网络基础二/" itemprop="url">网络基础二</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-24T19:13:57+08:00">
                2019-10-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time </span>
                
                <span title="Reading time">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-2-数据链路层"><a href="#1-2-数据链路层" class="headerlink" title="1.2 数据链路层"></a>1.2 数据链路层</h1><p>1.OSI七层模型：</p>
<p>  （1）物理层：定义了终端设备的传输介质，传输的是bit流。</p>
<p>  （2）数据链路层：把bit转换为数据帧，实现基于mac地址的寻址和转发</p>
<p>  （3）网络层：把数据帧转换为数据包，实现基于IP地址的寻址和转发</p>
<p>  （4）传输层：把数据包转换为数据段，为数据提供可靠或者不可靠的传输，为应用程序提供端到端的服务</p>
<p>  （5）会话层：建立、维持和管理、终止会话</p>
<p>  （6）表示层：数据的表现形式，比如压缩、加密、</p>
<p>  （7）应用层：为用户提供服务。</p>
<p>2.数据链路层：把bit转换为数据帧，实现基于mac地址的寻址和转发</p>
<p>  （1）Mac地址：是由48 bit的二进制数组成，为了读写方便，用十六进制表示。</p>
<p>​                其中前24bit表示厂商信息，后24位表示设备信息，由厂家自定义。</p>
<p>​                mac地址是由厂家出厂的时候直接烧录到网卡里，一般情况下不能修改。</p>
<p>  （2）Mac地址的分类：</p>
<p>​                单播mac：如果一个Mac地址的第8bit是0，那么这个mac地址表示单播mac。</p>
<p>​                组播mac：如果一个Mac地址的第8bit是1，那么这个mac地址表示组播mac。</p>
<p>​                广播mac：全FF-FF-FF-FF-FF-FF</p>
<p>  （3）数据帧格式：EthernetII数据帧</p>
<p>​       二层数据帧最大1518Byte == 6Byte的Dmac+ 6Byte Smac+ 2Byte（Type字段：标识上层协议） + 数据Data（最大1500Byte） +4Byte（帧校验：FCS）</p>
<p>3.交换机的工作原理：</p>
<p><img src="C:%5CUsers%5CAdministrator%5CAppData%5CLocal%5CYNote%5Cdata%5C2693615777@qq.com%5C09e38586875546599d71dc02864b7914%5Cclipboard.png" alt="img"></p>
<p>4.真实设备连接：</p>
<p>  （1）设备的console口————console线————PC的USB口</p>
<p>  （2）在真机里安装USB-COM口的驱动</p>
<p>  （3）计算机——管理——设备管理——端口，找到驱动起来的接口编号</p>
<p>  （4）真机里安装远程管理的软件：Xshell/SecureCRT/Putty       </p>
<p>5.交换机的组成：</p>
<p>  （1）CPU：用于运算和控制</p>
<p>  （2）ROM：Read  Only  Memory，只读存储，存储的系统的引导文件====》类似于引导分区</p>
<p>  （3）RAM：Random Access Memory，随机存储，相当于内存====》running-config  </p>
<p>  （4）Flash：闪存，用于存放IOS（路由器或者交换机的系统）系统，也可以存放用户数据。=====》类似于C盘。</p>
<p>  （5）NVRAM：非易失性存储，为数据做永久存储。=====》类似于硬盘。</p>
<p>6.交换机的常见模式：</p>
<p>​    Switch&gt;en   //用户模式，只能使用一些简单的命令；不能查看当前配置。</p>
<p>​    Switch#            //特权模式，可以使用比较多的查看命令。</p>
<p>​    Switch#conf t        //全局配置模式，修改交换机的配置</p>
<p>​    Enter configuration commands, one per line.  End with CNTL/Z.</p>
<p>​    Switch(config)#</p>
<p>​    退出模式：exit</p>
<p>​    直接退到特权模式：end  == Ctrl + z </p>
<p>​    快捷键：ctrl+a   移动到行首</p>
<p>​            ctrl+e   移动到行尾</p>
<p>​            ctrl+u   清空行</p>
<p>​            Ctrl+shift+6   </p>
<p>​    </p>
<p>7.特权模式常用命令：</p>
<p>  所有的show命令都可以在特权模式下直接使用；如果是其他模式，要加do。</p>
<p>  （1）Switch#show ip interface brief  ==show  ip  int  bri   //查看所有接口的状态和配置</p>
<p>  Status表示接口的物理状态，是否手动就行了修改；Protocol表示链路的协商状态是否正常。</p>
<p>  说明：只有2个状态都是up的时候才是正常的。</p>
<p>  Interface              IP-Address      OK? Method Status                Protocol</p>
<p>​    FastEthernet0/1        unassigned      YES manual up                    up</p>
<p> （2）show  int  f0/6     // 接口支持简写，fastethernet简写为f0/1 ;Ethernet简写为 e0/1;Gi 简写为g0/1;</p>
<p>​       查看物理接口的双工和速率</p>
<p>​      Full-duplex, 10Mb/s     //duplex表示双工模式，如果是Full表示全双工；如果是half表示半双工；如果是auto表示自适应。</p>
<p> （3）修改接口的双工和速率</p>
<p>​      enable  </p>
<p>​      conf   t</p>
<p>​      int   f0/1</p>
<p>​      speed   10/100/auto        //修改接口的速率</p>
<p>​      duplex  half/full/auto    //修改接口的双工模式</p>
<p> （4）SW1#show   mac-address-table   //查看mac地址表，Type类型为Dynamic，表示交换机自己学到的。</p>
<p>​      SW1#clear  mac-address-table    #清空mac地址表</p>
<p> （5）其他命令：</p>
<p>​    SW1#clock set 17:07:30 May 14 2019   #设置时间：时分秒，月日年</p>
<p>​    SW1#show history    #查看命令历史</p>
<p>​    SW1#show running-config    #查看交换机当前配置，还没有保存（重启就失效；只是写入了“内存”）(<strong>**</strong>)</p>
<p>​    SW1#write            #保存配置</p>
<p>​    Building configuration…</p>
<p>​    [OK]</p>
<p>​    SW1#copy running-config     startup-config    #把running里的配置保存到开机启动配置文件里</p>
<p>​    SW1#show startup-config     #交换机每次开机的时候会自动加载的配置（重启仍然有效；写到了“硬盘”中，做永久存储）</p>
<p>​    SW1#reload       #重启</p>
<p>8.远程登录的配置：</p>
<p>（1）设备管理——本地管理和远程管理（通过网络来管理设备，常用的方式有Telnet、SSH、远程桌面、远程协助、Team View等）</p>
<p>（2）远程管理的步骤：</p>
<p>​    第一步：给交换机配置IP</p>
<p>​    SW1(config)#interface vlan 1    //进入虚拟接口；</p>
<p>​    SW1(config-if)#ip address 192.168.1.100 255.255.255.0     //配置IP</p>
<p>​    SW1(config-if)#no sh        //激活接口 no shutdown</p>
<p>​    第二步：配置telnet</p>
<p>​    SW1(config)#line vty 0 4    #0表示第1个虚拟接口；4表示最多允许登录人数</p>
<p>​    SW1(config-line)#password 123456      #设置远程登录的密码</p>
<p>​    SW1(config-line)#login     #激活</p>
<p>​    第三步：进入特权模式的密码</p>
<p>​    SW1(config)#enable password   123456 #password表示的明文密码</p>
<p>​    SW1(config)#enable secret  123456     #secret表示密文的密码；如果两个都存在，那么密文生效</p>
<p>（3）给console口做安全配置===》本地的安全</p>
<p>​    SW1(config)#line console 0 </p>
<p>​    SW1(config-line)#exec-timeout 0 0       #设置超时时间，第一个0表示分钟；第二个0表示s；0 0 表示永不超时（仅限于实验环境）</p>
<p>​    SW1(config-line)#password console     #设置console的登录密码</p>
<p>​    SW1(config-line)#logging synchronous    #设置光标跟随，不让命令被日志信息打断</p>
<p>​    SW1(config-line)#login         #激活</p>
<p>​    SW1(config)#no ip domain-lookup        #关闭域名解析</p>
<p>​    SW1#erase startup-config          #清空所有配置</p>
<p>（4）其他命令</p>
<p>​    SW1(config)#do copy r s== do  write   #保存</p>
<p>​    Switch#show version   #查看系统版本</p>
<p>（5）ssh配置</p>
<p>​    开启SSH（基于本地用户进行身份验证）：</p>
<p>​    conf t </p>
<p>​    hostname  SW1     //设置主机名</p>
<p>​    username  test  password  密码   //设置登录的用户名和密码</p>
<p>​    ip domain-name  <a href="http://www.test.com" target="_blank" rel="noopener">www.test.com</a>    //配置域名，域名用来生成公钥和私钥</p>
<p>​    crypto  key  generate  rsa        //生成一对rsa算法的公钥和私钥</p>
<p>​    line vty 0 4</p>
<p>​    transport  input  ssh/all</p>
<p>​    login local</p>
<p>​    exit</p>
<p>​    ssh -l  test  192.168.1.254   //在模拟PC上使用ssh连接设备</p>
<p>=============================================================================</p>
<p>destination  目标</p>
<p>Source       源</p>
<p>Current     当前</p>
<p>configuration    配置</p>
<p>Status           状态         </p>
<p>Protocol        协议</p>
<p>Dynamic     动态</p>
<p>minutes    分钟</p>
<p>seconds    秒</p>
<p>generate    生成</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="blog.shenzihao.top/2019/10/18/网络基础一/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="吕敏">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/1.jpg">
    </span>

     <span title="Words count in article">
      字
     </span>

        ...
     <span title="Reading time">
      分钟
     </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LvMin-Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/18/网络基础一/" itemprop="url">网络基础一</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-18T19:46:39+08:00">
                2019-10-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time </span>
                
                <span title="Reading time">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-1-OSI七层模型及基础"><a href="#1-1-OSI七层模型及基础" class="headerlink" title="1.1 OSI七层模型及基础"></a>1.1 OSI七层模型及基础</h1><p>ISP:运营商，电信、移动、联通</p>
<p>IEEE：国际电子电气工程师协会，致力于电气、电子、计算机工程和与科学有关的领域的开发和研究，在太空</p>
<p>ISO（国际标准化组织）</p>
<p>网络设备：交换（实现相同网段通信）和路由器（找路，实现不同网段通信）</p>
<p>IP：标识网络中任意一台主机的位置（收发件人的地址）</p>
<p>1.网络：两个不在同一地理位置的主机，通过传输介质和通信协议，以实现资源共享和数据传输。</p>
<p>  （1）传输介质：</p>
<p>  （2）通信协议：“语言”，设备之间交流使用的语言叫做“协议”</p>
<p>  （3）资源共享：文本类、视频、音频、图片等</p>
<p>  （4）终端：笔记本、台式机、平板、手机等</p>
<p>2.网络的分类：按照范围分</p>
<p>  （1）WAN（Wide Area Network）：广域网，典型代表Internet，还有VPN（虚拟私有网络–“隧道”）</p>
<p>  （2）LAN(Local Area Network)：局域网，“内网”，比如：家庭网、企业网、园区网等</p>
<p>  （3）MAN：城域网</p>
<p>3.网络拓扑：是一个网络的架构描述；方便管理和查看网络结构。</p>
<p>  星型：组网灵活、方便扩展和管理；但是中心节点一旦发生故障，就会全网瘫痪。</p>
<p>  全网型拓扑：每个设备都和其他设备相连，任意一个节点坏掉都不影响其他设备的通信。</p>
<p>​        缺点：成本太高。</p>
<p>  部分网状型：有2个（或以上）性能比较好的设备来做“冗余（多余）”，防止网络故障。</p>
<p>4.OSI七层参考模型：由ISO组织提出的OSI七层模型。</p>
<p>  最开始的网络厂商是不兼容的，不能直接对接。</p>
<p>  为了促进各厂商的融合，ISO组织提出了OSI（Open System Interconnection，OSI）七层模型</p>
<p>  OSI七层就是定义了数据在传输过程中如何进行“封装”（打包）和“解封装”（拆包）</p>
<p>  （1）物理层：定义了终端设备的传输介质。传输的是bit流。</p>
<p>  （2）数据链路层：把bit流转换为数据帧，实现基于mac地址的寻址和转发。</p>
<p>  （3）网络层：把数据帧转换为数据包，实现基于IP地址的寻址和转发。</p>
<p>  （4）传输层：把数据包转换为数据段，为数据提供可靠或者不可靠的传输；为应用程序提供端到] 端 的服务。</p>
<p>​       netstat  -an      //查看端口和连接情况</p>
<p>  （5）会话层：用来建立、维持、管理和终止会话</p>
<p>  （6）表示层：数据的表现形式，比如加密和压缩</p>
<p>  （7）应用层：为用户提供服务。</p>
<p>5.TCP/ip模型：也叫做TCP/IP协议栈。可以说是4层，也可以说是5层</p>
<p>  4层：</p>
<p>  网络接口层：物理层和数据链路层</p>
<p>  网络层：把数据帧转换为数据包，实现基于IP地址的寻址和转发。</p>
<p>  传输层：把数据包转换为数据段，为数据提供可靠或者不可靠的传输；为应用程序提供端到端的服务。</p>
<p>  应用层：把会话、表示层和应用层合并为一层。</p>
<p>物理层</p>
<p>1.物理层：定义了终端设备的传输介质。传输的是bit流。</p>
<p>  常见的物理介质：网线、光纤、同轴线缆</p>
<p>2.以太网中的术语</p>
<p>  （1）广播：一对多；讲课</p>
<p>  （2）组播：一对多，只有同一组里的主机才能接收到；群聊</p>
<p>  （3）单播：一对一</p>
<p>  （4）全双工：同一时刻，可以同时进行发送（上传）和接收（下载），比如手机</p>
<p>  （5）半双工：同一时刻，只能发送或者接收数据，比如对讲机</p>
<p>  （6）单工：只能进行单向传输，比如收音机</p>
<p>  （7）冲突域：一个冲突影响的范围就是冲突域。</p>
<p>  （8）广播域：一个广播影响的范围就是广播域。</p>
<p>3.同轴线缆：传输速度快，但是只有一根芯，半双工的工作模式。</p>
<p>  应用：电视、监控等</p>
<p>  同轴线缆：100Base-2（细线，理论上可以传输185m）和100Base-5（粗线，理论上可以传输500m）</p>
<p>  4.光纤：单模光纤和多模光纤</p>
<p>  单模光纤：只能传输一种光，传输距离更远</p>
<p>  多模光纤：可以传输多种光。</p>
<p>5.网线：在以太网中常见的传输介质，网线的理论值能传输100M。</p>
<p>  （1）从结构上来分：屏蔽双绞线（有锡纸，适合室外布线）和非屏蔽双绞线（适合室内布线）</p>
<p>  （2）从传输速率来分：</p>
<p>​        CAT5:5类线，传输速率的100M（百兆以太网）</p>
<p>​        cat6:6类线，传输速率为1000M（千兆以太网）</p>
<p>​        CAt7:7类线或者超6类，传输速率为10G（万兆以太网）</p>
<p>  （3）按照网线的排序：T568A和T568B</p>
<p>​        T568B：橙白、橙、绿白、蓝、蓝白、绿、棕白、棕 </p>
<p>​        T568B在100M以太网中，使用了4根，1,2用于发送；3,6用于接收。</p>
<p>​        T568A是1,3对调；2,6对调；</p>
<p>  （4）按照一根线的两端网线的连接方式：</p>
<p>​        如果一根线的两端都是T568B，这种线叫做“直通线”——————不同种设备之间用直通线</p>
<p>​        如果一根线一端是T568B，一端是T568A，这种线的连接方式叫做“交叉线”————同种设备之间用交叉线</p>
<p>​        全反线，也叫做Console线，用来对设备进行配置。</p>
<p>6.不管是什么传输介质，在传输数据的时候，信号都会出现衰减，这个时候需要使用设备来延长信号的传输距离。</p>
<p>  物理层的设备：hub（集线器），只能识别bit流。</p>
<p>​    由于内部是总线型结构，网络的传输效率特别低。</p>
<p>​    hub没有学习功能；</p>
<p>​    hub的每个接口都是一个冲突域；</p>
<ol start="7">
<li>带宽：单位时间内传输数据的速度</li>
</ol>
<p>​    默认单位：bit/s</p>
<p>​    计算机最开始的时候只能识别0和1.每个0或1就是一个bit（位）。</p>
<p>​    为了方便计算机读取，把每 8  bit==1 Byte（容量单位）。</p>
<p>​    1Byte=8bit </p>
<p>​    1KB==1024B</p>
<p>​    1MB=1024KB</p>
<p>​    1GB=1024MB</p>
<p>​    1TB=1024GB</p>
<p>​    一个2G（GB）电影，使用100M（bit/s）的带宽，需要多长时间下载完成？</p>
<p>​    2*1024=2048MB</p>
<p>​    100/8=12.5B/s </p>
<p>​    2.73min</p>
<p>1.进制：</p>
<p>  二进制B ：  0  1</p>
<p>  八进制O ：  0  1  2  3  4  5  6  7  </p>
<p>  十进制D ：  0  1  2  3  4  5  6  7  8  9  </p>
<p>  十六进制H ：0  1  2  3  4  5  6  7  8  9  A（10）   B（11）  C（12）   D（13）  E（14）  F（15） </p>
<p>2.把1-F转换为二进制：</p>
<p>  十六进制     二进制</p>
<p>  0            0</p>
<p>  1            1</p>
<p>  2            10</p>
<p>  3            11</p>
<p>  4            100</p>
<p>  5         101</p>
<p>  6            110</p>
<p>  7            111</p>
<p>  8            1000</p>
<p>  9            1001</p>
<p>  10        1010</p>
<p>  11        1011</p>
<p>  12        1100</p>
<p>  13        1101</p>
<p>  14        1110</p>
<p>  15        1111</p>
<p>3.十进制转其他进制：短除法</p>
<p>  把这几个数转换为二进制</p>
<p>  128=10000000</p>
<p>  192=11000000</p>
<p>  224=11100000</p>
<p>  240=11110000</p>
<p>  248=11111000</p>
<p>  252=11111100</p>
<p>  254=11111110</p>
<p>  255=11111111</p>
<p>  2的0次方=1</p>
<p>  2的1次方=2</p>
<p>  2的2次方=4</p>
<p>  2的3次方=8</p>
<p>  2的4次方=16</p>
<p>  2的5次方=32</p>
<p>  2的6次方=64</p>
<p>  2的7次方=128</p>
<p>  2的8次方=256</p>
<p>  2的9次方=512</p>
<p>  2的10次方=1024</p>
<p>  十进制转八进制：</p>
<p>  479        </p>
<p>  640    1200    </p>
<p>  1200        2260</p>
<p>  1024        2000</p>
<p>  512        1000</p>
<p>  十进制转十六进制：</p>
<p>  1600        640</p>
<p>  3216        C90</p>
<p>  4801        12C1</p>
<p>  2048        800</p>
<p>4.其他进制转十进制：乘法</p>
<p>  十六进制：ABC  B00  </p>
<p>  八进制：  501  234  </p>
<p>  二进制：  1       0    1   0    1  0  0  0 =168</p>
<p>​            128  64  32   16   8  4  2  1    </p>
<p>​            </p>
<p>5.IP地址：分别是Ipv4和Ipv6.</p>
<p>  （1）其中IPv4是由32位的二进制数组成，为了读写方便，用点分十进制表示。IPV4的地址空间是42亿。</p>
<p>​       IPv6是由128位的二进制数组成，为了读写方便，用冒号分十六进制表示。</p>
<p>  （2）IPv4中按照用途把地址分为2大类：公网地址和私网地址</p>
<p>​        公网地址：是互联网上使用，具有全球唯一性。</p>
<p>​        私网地址：在以太网中可以重复使用。</p>
<p>​        10.0.0.0————10.255.255.255   子网掩码：255.0.0.0（简写10.0.0.0/8，这里的8代表子网中“1”的个数）</p>
<p>​        172.16.0.0————172.31.255.255    子网掩码：255.255.0.0</p>
<p>​        192.168.0.0————192.168.255.255  子网掩码：255.255.255.0</p>
<p>  （3）IP地址的分类：</p>
<p>​       A类：1——126，默认子网掩码是255.0.0.0；地址范围：1.0.0.0————126.255.255.255</p>
<p>​       B类：128——191，默认子网掩码是255.255.0.0；地址范围：128.0.0.0————191.255.255.255</p>
<p>​       C类：192——223，默认子网掩码是255.255.255.0；地址范围：192.0.0.0————223.255.255.255</p>
<p>​       D类：224——239，用于组播</p>
<p>​       E类：240——255，用于科研</p>
<p>  （4）子网掩码：用来标识Ip地址中的网络位和主机位的。</p>
<p>​       网络位：在Ip地址中，与子网掩码“1”（二进制）对应的是网络位</p>
<p>​       主机位：在Ip地址中，与子网掩码“0”（二进制）对应的位是主机位。</p>
<p>​       网络地址：在Ip地址中，如果“主机位”全为0，这个地址就是网络地址。====》路由器找路的时候使用</p>
<p>​       广播地址：在Ip地址中，如果“主机位”全为1，这个地址就是广播地址。====》同一个网络中广播的时候使用</p>
<p>​       说明：网络地址和广播地址不能直接在网络中进行配置。</p>
<p>​       </p>
<p>​       如何判断两个IP地址是否在同一个网段？——————网络位相同的IP地址是同一个网段（交换机）；</p>
<p>​       </p>
<p>​       192        .     168.      120.171</p>
<p>​       255        .     255.      255.0</p>
<p>​       11111111.11111111.11111111.00000000</p>
<p>​       </p>
<p>​        北京市昌平区二拨子   博纳电气蓝鸥科技2楼</p>
<p>  （5）举例：</p>
<p>​       100.1.1.2和110.24.25.20</p>
<p>​       255.0.0.0</p>
<p>​       99.45.67.8和99.59.58.9</p>
<p>​       255.0.0.0         </p>
<p>​       192.168.110.10和192.168.200.10</p>
<p>​       255.255.255.0</p>
<p>​       172.16.30.1和172.16.200.1</p>
<p>​       255.255.0.0</p>
<p>​       200.10.10.10和200.10.20.10</p>
<p>​       255.255.255.0</p>
<p>​        6.家用路由器的基本功能；</p>
<p>  （1）路由的功能：为数据包寻找一条最优路径；————找路 </p>
<p>  （2）地址转换功能：把私网地址转化为公网地址；————WAN口（宽带的用户名和密码校验成功，才会给用户分配公网Ip）</p>
<p>  （3）DHCP功能：为客户端分配Ip/子网/网关/DNS</p>
<p>​       </p>
<p>​            </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="blog.shenzihao.top/2019/10/17/Linux-四/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="吕敏">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/1.jpg">
    </span>

     <span title="Words count in article">
      字
     </span>

        ...
     <span title="Reading time">
      分钟
     </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LvMin-Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/17/Linux-四/" itemprop="url">Linux(四)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-17T19:34:38+08:00">
                2019-10-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time </span>
                
                <span title="Reading time">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="程序安装及管理"><a href="#程序安装及管理" class="headerlink" title="程序安装及管理"></a><strong>程序安装及管理</strong></h1><p><strong>一、应用程序基础</strong></p>
<p>将软件传到LINUX中</p>
<p>yum install lrzsz</p>
<p>（注意：LINUX要能连入互联网，ping <a href="http://www.qq.com" target="_blank" rel="noopener">www.qq.com）</a>/)</p>
<p><strong>应用程序与系统命令的关系</strong></p>
<p><strong>文件位置</strong></p>
<p>系统命令：一般在/bin和/sbin目录中，或为Shell内部指令</p>
<p>应用程序：通常在/usr/bin和/usr/sbin目录中</p>
<p><strong>主要用途</strong></p>
<p>系统命令：完成对系统的基本管理工作，例如IP配置工具</p>
<p>应用程序：完成相对独立的其他辅助任务，例如网页浏览器</p>
<p><strong>适用环境</strong></p>
<p>系统命令：一般只在字符操作界面中运行</p>
<p>应用程序：根据实际需要，有些程序可在图形界面中运行</p>
<p><strong>运行格式</strong></p>
<p>系统命令：一般包括命令字、命令选项和命令参数</p>
<p>应用程序：通常没有固定的执行格式</p>
<p><strong>典型应用程序的目录结构</strong></p>
<p>文件类型 保存目录</p>
<p>普通执行程序文件 /usr/bin</p>
<p>服务器执行程序文件和管理程序文件 /usr/sbin</p>
<p>应用程序配置文件 /etc</p>
<p>日志文件 /var/log</p>
<p>应用程序文档文件 /usr/share/doc</p>
<p>应用程序手册页文件 /usr/share/man</p>
<p><strong>常见的软件包封装类型</strong></p>
<p>文件类型 保存目录</p>
<p>rpm软件包 扩展名为“.rpm”</p>
<p>deb软件包 扩展名为“.deb”</p>
<p>源代码软件包 一般为“.tar.gz”、“.tar.bz2”等格式的压缩包，包含程序的原始代码</p>
<p>绿色免安装的软件包 在压缩包内提供已编译好的执行程序文——解开压缩包后的文件即可直接使用</p>
<p><strong>Centos软件包管理</strong></p>
<p><strong>rpm软件包</strong></p>
<p>RPM</p>
<p>Redhat Package Manager</p>
<p>由 Red Hat 公司提出，被众多 Linux 发行版所采用</p>
<p>建立统一的数据库文件</p>
<p>详细记录软件包安装、卸载等变化信息</p>
<p>自动分析软件包依赖关系</p>
<p>RPM 软件包</p>
<p>软件素材参考：<a href="http://www.rpm.org/" target="_blank" rel="noopener">http://www.rpm.org</a></p>
<p><strong>一般命名格式：</strong></p>
<p><strong>查询已安装的 RPM 软件信息</strong></p>
<p><strong>rpm -q[子选项] [软件名]</strong></p>
<p><strong>常用选项</strong></p>
<p>-qa、-qi、 -ql、 -qf、-qc、-qd</p>
<p>Rpm –qa查询所有安装的rpm软件包</p>
<p>Rpm –qi 查询已安装的某软件包的信息</p>
<p>Rpm –ql查询已安装的某软件包安装路径</p>
<p>查询未安装的 RPM 软件包文件中信息</p>
<p>rpm - qp[子选项] RPM包文件</p>
<p>常用选项</p>
<p>-qpi、-qpl、-qpc、-qpd</p>
<p>使用rpm 命令只能查询通过 RPM方式安装的软件包信息用，其他途径安装到系统中的软件包，rpm 命令将无法获取相关信息</p>
<p><strong>安装或升级RPM 软件</strong></p>
<p>rpm [选项] RPM包文件 …</p>
<p>-i :在当前系统中安装一个新的RPM软件包</p>
<p>-e:卸载指定名称的软件包</p>
<p>-U:检查并升级系统中的某个软件包,若该软件包原来并未安装,曾等同于”-i”选项</p>
<p>-F:检查并更新系统中的某个软件包,若该软件包原来并未安装,则放弃安装</p>
<p>-h:在安装或升级软件包的过程中,以”#”号显示安装进度</p>
<p>-v:显示软件安装过程中的详细信息</p>
<p>–force:强制安装某个软件包,当需要替换已安装的软件包及文件,或者安装一个比当前使用的软件版本更旧的软件时,可以使用此选项</p>
<p>–nodeps:在安装或升级,卸载一个软件包时,不检查与其他软件包的依赖关系</p>
<p><strong>常用选项</strong></p>
<p>-i、 -U、 -F</p>
<p>安装 升级 强制</p>
<p>-vh显示安装进度</p>
<p>rpm -ivh 软件包</p>
<p>卸载指定的RPM软件</p>
<p>rpm -e 软件名</p>
<p><strong>辅助选项</strong></p>
<p>–force、–nodeps、-h、-v、</p>
<p><strong>重建RPM 数据库</strong></p>
<p>[root@localhost ~]# rpm –rebuilddb</p>
<p>或</p>
<p>[root@localhost ~]# rpm –initdb</p>
<p><strong>导入验证公钥</strong></p>
<p>root@localhost ~]# rpm –import /media/cdrom/RPM-GPG-KEY-redhat-release</p>
<p><strong>解决软件包依赖关系方法</strong></p>
<p>安装有依赖关系的多个软件</p>
<p>卸载有依赖关系的多个软件</p>
<p>忽略依赖关系</p>
<p>结合“–nodeps”选项，但可能导致软件异常</p>
<p><strong>源代码编译概述</strong></p>
<p>使用源代码安装软件的优点</p>
<p>获得最新的软件版本，及时修复bug</p>
<p>根据用户需要，灵活定制软件功能</p>
<p><strong>应用场合举例</strong></p>
<p>安装较新版本的应用程序时</p>
<p>当前安装的程序无法满足需要时</p>
<p>需要为应用程序添加新的功能时</p>
<p>源代码编译过程</p>
<p><strong>二、YUM安装软件</strong></p>
<p>YUM，Yellow dog Updater Modified</p>
<p>基于RPM包构建的软件更新机制</p>
<p>可以自动解决依赖关系</p>
<p>所有软件包由集中的YUM软件仓库提供</p>
<p><strong>软件仓库的提供方式</strong></p>
<p>FTP服务：ftp://……</p>
<p>HTTP服务：http://……</p>
<p>本地目录：file:///…….</p>
<p><strong>RPM软件包的来源</strong></p>
<p>CentOS发布的RPM包集合</p>
<p>第三方组织发布的RPM包集合</p>
<p>用户自定义的RPM包集合</p>
<p><strong>构建CentOS 7 软件仓库</strong></p>
<p>RPM包来自CentOS 7 DVD光盘</p>
<p>通过FTP、HTTP或本地目录提供给客户机</p>
<p>在软件仓库中加入非官方RPM包组</p>
<p>包括存在依赖关系的所有RPM包</p>
<p>使用createrepo工具建立仓库数据文件</p>
<p><strong>YUM缓存目录</strong></p>
<p>存放下载的软件包、仓库信息等数据</p>
<p>位于/var/cache/yum/$basearch/$releasever</p>
<p>[root@localhost ~]# yum clean all</p>
<p><strong>为客户机指定YUM仓库位置</strong></p>
<p>配置文件：/etc/yum.repos.d/*.repo</p>
<p>[root@localhost ~]# vi /etc/yum.repos.d/centos7.repo</p>
<p>[base]</p>
<p>name=CentOS 7.5</p>
<p>baseurl=<a href="ftp://192.168.4.254/centos7" target="_blank" rel="noopener">ftp://192.168.4.254/centos7</a></p>
<p>enabled=1</p>
<p>gpgcheck=1</p>
<p>gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</p>
<p>[other]</p>
<p>name=Other RPM Packages</p>
<p>baseurl=<a href="ftp://192.168.4.254/other" target="_blank" rel="noopener">ftp://192.168.4.254/other</a></p>
<p>enabled=1</p>
<p>gpgcheck=0</p>
<p><strong>直接以CentOS 7 光盘作软件仓库</strong></p>
<ol>
<li>将CentOS 7 光盘放入光驱</li>
<li>指定仓库位置，URL地址为 file:///media/cdrom</li>
</ol>
<p>[root@localhost ~]# vi /etc/yum.repos.d/local.repo</p>
<p>……</p>
<p>[local]</p>
<p>name=CnetOS 7.3</p>
<p>baseurl=file:///media/cdrom</p>
<p>enabled=1</p>
<p>gpgcheck=0</p>
<p><strong>关于yum命令</strong></p>
<p>由软件包yum-3.4.3-150.el7.centos.noarch提供</p>
<p>用来访问YUM仓库，查询、下载及安装、卸载软件包</p>
<p><strong>yum的配置文件</strong></p>
<p>基本设置：/etc/yum.conf</p>
<p>仓库设置：/etc/yum.repos.d/*.repo</p>
<p>日志文件：/var/log/yum.log</p>
<p><strong>查询软件包</strong></p>
<p>yum list [软件名]…</p>
<p>yum info [软件名]…</p>
<p>yum search &lt;关键词&gt;…</p>
<p><strong>查询软件包组</strong></p>
<p>yum grouplist [包组名]…</p>
<p>yum groupinfo &lt;包组名&gt;…</p>
<p><strong>安装软件</strong></p>
<p>yum install [软件名]</p>
<p>yum groupinstall &lt;包组名&gt;</p>
<p><strong>升级软件</strong></p>
<p>yum update</p>
<p>yum groupupdate</p>
<p><strong>卸载软件</strong></p>
<p>yum remove &lt;软件名&gt;…</p>
<p>yum groupremove &lt;包组名&gt;…</p>
<p><strong>yum安装:</strong></p>
<ol>
<li>yum源配置文件所在位置:/etc/yum.repos.d/</li>
</ol>
<p>注意:此目录下有许多.repo的配置文件,可以全部移走,然后自己创建一个XXX.repo的源文件</p>
<ol>
<li>编辑XXX.repo的源文件</li>
</ol>
<p>编辑内容:</p>
<ol>
<li>[名字] ——-自定义</li>
<li>Baseurl=file:///media ——定义yum源仓库为光驱的挂载点</li>
<li>enabled=1 ——-0 :关闭源 1表示开启源</li>
<li>Gpgcheck=0 ——0:不去校验包 1:校验包 效率低</li>
<li>保存退出</li>
<li>安装命令</li>
</ol>
<p>Yum install 包名</p>
<p><strong>源码包安装:（需要gcc）</strong></p>
<ol>
<li>下载源码包</li>
<li>解压源码包</li>
</ol>
<p>tar zxvf 软件名.tar.gz -C /解压目录 ——–解压压缩文件到指定目录里面</p>
<ol>
<li>配置</li>
</ol>
<p>./configure –prefix=/软件放置目录 ——-重新配置软件安装后文件存放的位置</p>
<ol>
<li>编译</li>
</ol>
<p>Make ———重新编译二进制</p>
<ol>
<li>编译安装</li>
</ol>
<p>Make install ——–编译安装</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="blog.shenzihao.top/2019/10/17/Linux-三/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="吕敏">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/1.jpg">
    </span>

     <span title="Words count in article">
      字
     </span>

        ...
     <span title="Reading time">
      分钟
     </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LvMin-Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/17/Linux-三/" itemprop="url">Linux(三)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-17T19:34:29+08:00">
                2019-10-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time </span>
                
                <span title="Reading time">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h1><p><strong>一、文件内容查看</strong></p>
<p>查看文件内容 cat 命令</p>
<p><strong>cat命令</strong></p>
<p>用途：显示出文件的内容</p>
<p>cat [选项] 文件名 …</p>
<p>cat –n 文件名</p>
<p>显示文件内容同时显示行号</p>
<p><strong>more命令</strong></p>
<p>用途：全屏方式分页显示文件内容</p>
<p>交互操作方法</p>
<p>按Enter键向下逐行滚动</p>
<p>按空格键向下翻一屏</p>
<p>按q键退出</p>
<p>Ctrl+f 下翻 Ctrl+b上翻</p>
<p>more [选项] 文件名 …</p>
<p><strong>less 命令</strong></p>
<p>用途：与 more 命令相同，但扩展功能更多</p>
<p>交互操作方法</p>
<p>Page Up 向上翻页，Page Down 向下翻页</p>
<p>按“/”键查找内容，“n”下一个内容，“N”上一个内容</p>
<p>其他功能与 more 命令基本类似</p>
<p>less [选项] 文件名 …</p>
<p><strong>tail命令</strong></p>
<p>用途：查看文件结尾的少部分内容（默认为10行）</p>
<p>tail -n 文件名 …</p>
<p>显示尾部指定行数</p>
<p>tail -f 文件名：动态观察文件变化</p>
<p><strong>wc命令</strong></p>
<p>用途：统计文件中的单词数量（Word Count）等信息</p>
<p>常用命令选项</p>
<p>-l：统计行数</p>
<p>-w：统计单词个数</p>
<p>-c：统计字节数</p>
<p>wc [选项]… 目标文件…</p>
<p>wc -l /etc/passwd</p>
<p>wc -l /var/log/secure</p>
<p><strong>grep命令（支持正则表达式）</strong></p>
<p>用途：在文件中查找并显示包含指定字符串的行</p>
<p>常用命令选项</p>
<p>-i：查找时忽略大小写</p>
<p>-v：反转查找，输出与查找条件不相符的行</p>
<p>查找条件设置</p>
<p>要查找的字符串以双引号括起来</p>
<p>“^……”表示以……开头，“……$”表示以……结尾</p>
<p>“^$”表示空行</p>
<p>grep [选项]… 查找条件 目标文件</p>
<p>例如：grep -v “^#” /etc/yum.conf | grep -v “^$”</p>
<p>Grep “^root” /etc/passwd</p>
<p><strong>二、压缩命令gzip、bzip2</strong></p>
<p><strong>gzip命令、bzip2命令</strong></p>
<p>用途：制作压缩文件、解开压缩文件</p>
<p>常用命令选项</p>
<p>-9、-d</p>
<p>gzip [-9] 文件名… ——gzip工具压缩文件</p>
<p>bzip2 [-9] 文件名…—–bzip2工具压缩文件</p>
<p>gzip -d .gz格式的压缩文件 ——gzip工具解压文件</p>
<p>bzip2 -d .bz2格式的压缩文件——bzip2工具解压文件</p>
<p>请注意：</p>
<p>gzip和bzip2命令使用的压缩算法各不相同</p>
<p>一般来说bzip2的压缩效率要好一些</p>
<p>gunzip 命令</p>
<p>gunzip 等价于 gzip –d</p>
<p>gzip -d mkfile.gz</p>
<p>或</p>
<p>gunzip mkfile.gz</p>
<p>bunzip2 命令</p>
<p>bzip2和bunzip2命令的用法与gzip、gunzip命令基本相同</p>
<p><strong>tar命令</strong></p>
<p>用途：制作归档文件、释放归档文件</p>
<p>tar [选项] … 归档文件名 源文件或目录</p>
<p>tar [选项]… 归档文件名 [-C 目标目录]</p>
<p>常用命令选项</p>
<p>-c、-x、-v、-f、-p、-t、 -C、-z、-j</p>
<p>-c:创建.tar格式包文件</p>
<p>-C:解压时指定释放的目标文件夹</p>
<p>-f:表示使用归档</p>
<p>-j:调用bzip2程序进行压缩或是解压</p>
<p>-p:打包时保留文件及目录的权限</p>
<p>-P:打包时保留文件及目录的绝对路径</p>
<p>-t:列表查看包内的文件</p>
<p>-v:输出详细信息</p>
<p>-x:解压tar格式的包文件</p>
<p>-z:调用gzip程序进行压缩或是解压</p>
<p>压缩归档:</p>
<p>Tar zcvf 自定义压缩后的文件名.tar.gz 压缩的对象</p>
<p>Tar jcvf 自定义压缩后的文件名.tar.bzip2 压缩的 对象</p>
<p>解压:</p>
<p>Tar zxfv 压缩文件.tar.gz -C 解压后存放的目录</p>
<p>Tar jxvf 压缩文件.tar.bzip2 -C 解压后存放的目录</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="blog.shenzihao.top/2019/10/17/Linux-二/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="吕敏">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/1.jpg">
    </span>

     <span title="Words count in article">
      字
     </span>

        ...
     <span title="Reading time">
      分钟
     </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LvMin-Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/17/Linux-二/" itemprop="url">Linux(二)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-17T19:34:20+08:00">
                2019-10-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time </span>
                
                <span title="Reading time">
                  
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="文本编辑器-vi-命令"><a href="#文本编辑器-vi-命令" class="headerlink" title="文本编辑器 vi 命令"></a>文本编辑器 vi 命令</h1><p><strong>一、文件内容编辑</strong></p>
<p><strong>文本编辑器的作用</strong></p>
<p>创建或修改文本文件</p>
<p>维护 Linux 系统中的各种配置文件</p>
<p><strong>Linux中最常用的文本编辑器</strong></p>
<p>vi：类UNIX操作系统的默认文本编辑器。</p>
<p>vim：vim是vi文本编辑器（一般简称为vi编辑器）的增强版本</p>
<p>vi vim</p>
<p><strong>三种工作模式</strong></p>
<p>命令模式、输入模式、末行模式</p>
<p>不同模式之间的切换</p>
<p>I插入式</p>
<p>a追加式</p>
<p>o插入新行后进行编辑</p>
<p><strong>命令模式的基本操作</strong></p>
<p>光标移动</p>
<p>复制、粘贴、删除</p>
<p>文件内容查找</p>
<p>撤销编辑及保存退出</p>
<p><strong>末行模式的基本操作</strong></p>
<p>保存文件及退出vi编辑器</p>
<p>打开新文件或读入其他文件内容</p>
<p>文件内容替换</p>
<p>vim kernel.txt</p>
<p>(1)====&gt;命令模式:可以显示行号(:set nu ),可以查找信息(/word).支持上下左右键;</p>
<p>跳到行首^</p>
<p>跳到行尾$</p>
<p>跳到文档最开始:gg</p>
<p>跳到文档结尾:G</p>
<p>跳到某一行:10 //跳到第10行.</p>
<p>yy //复制光标所在行</p>
<p>p //粘贴到光标所在行的下一行</p>
<p>dd //删除光标所在行</p>
<p>5yy //复制光标所在行开始向下的一共5行</p>
<p>d^ //删除光标所在行到行首</p>
<p>d$ //删除光标所在行到行尾</p>
<p>u //撤销操作</p>
<p>(2)====&gt;命令模式=====&gt;进入编辑模式:i</p>
<p>(3)====&gt;命令模式=====&gt;进入编辑模式:i======&gt;末行模式Esc</p>
<p>:wq //保存并退出</p>
<p>:q! //强制退出,不保存</p>
<p>:set nu //显示行号</p>
<p>/10 //查找文档中包含”10”的内容,跳转到下一个用n</p>
<p>:w /test/test11/aaa.txt //把文件另存为aaa.txt</p>
<p>:s/old/new/ //把光标所在行第一个old”替换为”new</p>
<p>:s/old/new/g //把光标所在行所有的old”替换为”new</p>
<p>:% s/old/new/g //把所有行的old”替换为”new</p>
<p>:1,2 s/old/new/g //把第一行和第二行的old字符替换为new=====&gt;需要先执行set nu</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/1.jpg" alt="吕敏">
            
              <p class="site-author-name" itemprop="name">吕敏</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">21</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">20</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">吕敏</span>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count"></span>
  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>












        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      访客数
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      人
    </span>
  

  
    <span class="site-pv">
      总访问量
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      次
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

  
  
<script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
